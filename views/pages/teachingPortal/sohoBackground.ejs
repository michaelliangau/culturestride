<div style="text-align: center">
    <!-- Current slot allocations table -->
    <table class="striped highlight" style="overflow-x:scroll; width:100%;">

        <!-- Top row -->
        <thead>
            <tr>
                <th>Student Name</th>
                <th>Details</th>
                <th> </th>
            </tr>
        </thead>

        <!-- Table body -->
        <tbody>
            <% for (var i = 0 ; i < background.length ; i ++ ) { %>
            <tr id="activeStudentRow<%-background[i].sohoCID %>">
                <td style="max-width: 200px;overflow: auto;">
                    <%- background[i].sFirstName + ' ' + background[i].sLastName %>

                </td>
                <td>
                    <% if (background[i].classType == 'free') { %>
                        <span class="badge badge-primary badge-pill"><%- background[i].classType %></span>
                    <% } else { %>
                        <span class="badge badge-light badge-pill"><%- background[i].classType %></span>
                    <% } %>

                    <% if (background[i].toggleDailyHW == 1) { %>
                        <span class="badge badge-light badge-pill">
                            <svg xmlns="http://www.w3.org/2000/svg" style="display:inline" width="16" height="16" fill="currentColor" class="bi bi-vector-pen" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M10.646.646a.5.5 0 0 1 .708 0l4 4a.5.5 0 0 1 0 .708l-1.902 1.902-.829 3.313a1.5 1.5 0 0 1-1.024 1.073L1.254 14.746 4.358 4.4A1.5 1.5 0 0 1 5.43 3.377l3.313-.828L10.646.646zm-1.8 2.908l-3.173.793a.5.5 0 0 0-.358.342l-2.57 8.565 8.567-2.57a.5.5 0 0 0 .34-.357l.794-3.174-3.6-3.6z"/>
                                <path fill-rule="evenodd" d="M2.832 13.228L8 9a1 1 0 1 0-1-1l-4.228 5.168-.026.086.086-.026z"/>
                              </svg>
                            on</span>
                    <% } else if (background[i].toggleDailyHW == 2) { %>
                        <span class="badge badge-light badge-pill">
                            <svg xmlns="http://www.w3.org/2000/svg" style="display:inline" width="16" height="16" fill="currentColor" class="bi bi-vector-pen" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M10.646.646a.5.5 0 0 1 .708 0l4 4a.5.5 0 0 1 0 .708l-1.902 1.902-.829 3.313a1.5 1.5 0 0 1-1.024 1.073L1.254 14.746 4.358 4.4A1.5 1.5 0 0 1 5.43 3.377l3.313-.828L10.646.646zm-1.8 2.908l-3.173.793a.5.5 0 0 0-.358.342l-2.57 8.565 8.567-2.57a.5.5 0 0 0 .34-.357l.794-3.174-3.6-3.6z"/>
                                <path fill-rule="evenodd" d="M2.832 13.228L8 9a1 1 0 1 0-1-1l-4.228 5.168-.026.086.086-.026z"/>
                              </svg>
                            on (R/W only)</span>
                        <% } else if (background[i].toggleDailyHW == 3) { %>
                            <span class="badge badge-light badge-pill">
                                <svg xmlns="http://www.w3.org/2000/svg" style="display:inline" width="16" height="16" fill="currentColor" class="bi bi-vector-pen" viewBox="0 0 16 16">
                                    <path fill-rule="evenodd" d="M10.646.646a.5.5 0 0 1 .708 0l4 4a.5.5 0 0 1 0 .708l-1.902 1.902-.829 3.313a1.5 1.5 0 0 1-1.024 1.073L1.254 14.746 4.358 4.4A1.5 1.5 0 0 1 5.43 3.377l3.313-.828L10.646.646zm-1.8 2.908l-3.173.793a.5.5 0 0 0-.358.342l-2.57 8.565 8.567-2.57a.5.5 0 0 0 .34-.357l.794-3.174-3.6-3.6z"/>
                                    <path fill-rule="evenodd" d="M2.832 13.228L8 9a1 1 0 1 0-1-1l-4.228 5.168-.026.086.086-.026z"/>
                                  </svg>
                                on (L/S only)</span>
                    <% } %>
                    <span class="badge badge-light badge-pill">
                        
                        <svg style="display:inline" xmlns="http://www.w3.org/2000/svg" width="16"
                        height="16" fill="currentColor" class="bi bi-book" viewBox="0 0 16 16">
                        <path
                            d="M1 2.828c.885-.37 2.154-.769 3.388-.893 1.33-.134 2.458.063 3.112.752v9.746c-.935-.53-2.12-.603-3.213-.493-1.18.12-2.37.461-3.287.811V2.828zm7.5-.141c.654-.689 1.782-.886 3.112-.752 1.234.124 2.503.523 3.388.893v9.923c-.918-.35-2.107-.692-3.287-.81-1.094-.111-2.278-.039-3.213.492V2.687zM8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5 0 0 0 0 2.5v11a.5.5 0 0 0 .707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5 0 0 0 .78 0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5 0 0 0 16 13.5v-11a.5.5 0 0 0-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783z" />
                    </svg>
                        <%- background[i].readWriteHSKLevel %>
                        
                        <svg style="display:inline" xmlns="http://www.w3.org/2000/svg" width="16"
                        height="16" fill="currentColor" class="bi bi-chat" viewBox="0 0 16 16">
                        <path
                            d="M2.678 11.894a1 1 0 0 1 .287.801 10.97 10.97 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8.06 8.06 0 0 0 8 14c3.996 0 7-2.807 7-6 0-3.192-3.004-6-7-6S1 4.808 1 8c0 1.468.617 2.83 1.678 3.894zm-.493 3.905a21.682 21.682 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a9.68 9.68 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105z" />
                    </svg>
                    <%- background[i].listenSpeakHSKLevel %></span>
                    

                </td>
                <td>

                    <span  data-toggle="collapse" data-target="<%- '#sef' + i %>">
                        <a style="padding: 16px 20px; display:inline-flex;;" class="button button-secondary button-block button-shadow" data-toggle="tooltip" title="Student Details">
                            <svg xmlns="http://www.w3.org/2000/svg" style="display:inline-flex;" width="16" height="16" fill="currentColor" class="bi bi-file-medical" viewBox="0 0 16 16">
                                <path d="M8.5 4.5a.5.5 0 0 0-1 0v.634l-.549-.317a.5.5 0 1 0-.5.866L7 6l-.549.317a.5.5 0 1 0 .5.866l.549-.317V7.5a.5.5 0 1 0 1 0v-.634l.549.317a.5.5 0 1 0 .5-.866L9 6l.549-.317a.5.5 0 1 0-.5-.866l-.549.317V4.5zM5.5 9a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1h-5zm0 2a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1h-5z"/>
                                <path d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2zm10-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1z"/>
                              </svg>
                        </a>
                        </span>

                    

                    <!-- <a style="padding: 16px 20px; display:inline-flex;;" class="button button-secondary button-block button-shadow" href="<%- '/sohomessages?class=' + background[i].sohoCID %>" data-toggle="tooltip" title="Messages"><svg xmlns="http://www.w3.org/2000/svg" style="display: inline-flex;;" width="16" height="16" fill="currentColor" class="bi bi-chat-left-dots" viewBox="0 0 16 16">
                        <path d="M14 1a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H4.414A2 2 0 0 0 3 11.586l-2 2V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12.793a.5.5 0 0 0 .854.353l2.853-2.853A1 1 0 0 1 4.414 12H14a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>
                        <path d="M5 6a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>
                      </svg></a> -->
                    
                  

                    

            </tr> 
            
            <tr>
                <td colspan="6" class="collapse" id="<%- 'sef' + i %>">
                <form>
                    <div class="form-group">
                        <div style="display:flex;justify-content: space-between;">
                        <label for="studentDetailsNotes<%- background[i].sohoCID %>" style="display:inline-flex;">Notes</label> 
                        <button type="button" onclick="saveStudentDetailNotes(<%- background[i].sohoCID %>)" id="saveStudentDetailNotesBtn<%- background[i].sohoCID %>"
                        style="margin:0px 0px 10px auto;display:none;"
                        class="button button-secondary button-block button-shadow" data-toggle="tooltip" title="Save">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-save" viewBox="0 0 16 16">
                            <path d="M2 1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H9.5a1 1 0 0 0-1 1v7.293l2.646-2.647a.5.5 0 0 1 .708.708l-3.5 3.5a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L7.5 9.293V2a2 2 0 0 1 2-2H14a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h2.5a.5.5 0 0 1 0 1H2z"/>
                          </svg>
                        </button>
                    </div>

                    
            <div id="htmlTextEditor<%- background[i].sohoCID %>" onclick="tinyMCEinit(<%- background[i].sohoCID %>)" class="border-secondary tinyPlaceholderTextBox" style="min-height:8vh;max-height:20vh;">
                <div id="tooltip<%- background[i].sohoCID %>" class="subtext badge badge-pill badge-light" style="float: right; opacity: 1; " >
                  </div>
                  <%- background[i].notes %>
            </div>
  
            <textarea id="tinyTextEditor<%- background[i].sohoCID %>"
              name="tinyTextEditor" style="display:none"> 
              <%- background[i].notes %>
        </textarea>
        
                      </div>

                </form>
                <p class="subtext" style="margin-bottom:0">
                    Contact: <a href="mailto:<%- background[i].email %>"><%- background[i].email %></a><br>
                    Teacher: <%- background[i].tFirstName + ' ' + background[i].tLastName %><br>
                    Language Goal: <%- background[i].entryGoal %><br>
                    History: <%- background[i].entryHistory %>
                </p>
                    <hr>

                <p class="subtext" style="margin-bottom:0">
                    Self Judged Level: <%- background[i].primaryLevel %><br>
                    Reading Level: <%- background[i].entryReadingLevel %><br>
                    Listening Level: <%- background[i].entryListeningLevel %><br>
                    Speaking Level:<br>
                    <% if (background[i].entrySpeakingLevel) { %>
                        <audio id="audio" src="<%- background[i].entrySpeakingLevel %>" controls></audio>
                    <% } else { %>
                        <span class="badge badge-light badge-pill">No student input</span> 
                    <% } %>
                    <br>
                    Writing Level: <%- background[i].entryWritingLevel %>

                    </p>
                </td>
            </tr>
            
            <% } %>

        </tbody>
    </table>
</div>